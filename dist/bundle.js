!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=5)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}},function(t,e,n){t.exports=n(4)},function(t,e){function n(t,e,n,i,r,s,o){try{var a=t[s](o),h=a.value}catch(t){return void n(t)}a.done?e(h):Promise.resolve(h).then(i,r)}t.exports=function(t){return function(){var e=this,i=arguments;return new Promise(function(r,s){var o=t.apply(e,i);function a(t){n(o,r,s,a,h,"next",t)}function h(t){n(o,r,s,a,h,"throw",t)}a(void 0)})}}},function(t,e,n){var i=function(t){"use strict";var e,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function h(t,e,n,i){var r=e&&e.prototype instanceof g?e:g,s=Object.create(r.prototype),o=new z(i||[]);return s._invoke=function(t,e,n){var i=l;return function(r,s){if(i===d)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw s;return O()}for(n.method=r,n.arg=s;;){var o=n.delegate;if(o){var a=E(o,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===l)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var h=c(t,e,n);if("normal"===h.type){if(i=n.done?f:u,h.arg===v)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(i=f,n.method="throw",n.arg=h.arg)}}}(t,n,o),s}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var l="suspendedStart",u="suspendedYield",d="executing",f="completed",v={};function g(){}function y(){}function p(){}var m={};m[s]=function(){return this};var w=Object.getPrototypeOf,b=w&&w(w(I([])));b&&b!==n&&i.call(b,s)&&(m=b);var B=p.prototype=g.prototype=Object.create(m);function L(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function x(t){var e;this._invoke=function(n,r){function s(){return new Promise(function(e,s){!function e(n,r,s,o){var a=c(t[n],t,r);if("throw"!==a.type){var h=a.arg,l=h.value;return l&&"object"==typeof l&&i.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,s,o)},function(t){e("throw",t,s,o)}):Promise.resolve(l).then(function(t){h.value=t,s(h)},function(t){return e("throw",t,s,o)})}o(a.arg)}(n,r,e,s)})}return e=e?e.then(s,s):s()}}function E(t,n){var i=t.iterator[n.method];if(i===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var r=c(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,v;var s=r.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function z(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function I(t){if(t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:O}}function O(){return{value:e,done:!0}}return y.prototype=B.constructor=p,p.constructor=y,p[a]=y.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(B),t},t.awrap=function(t){return{__await:t}},L(x.prototype),x.prototype[o]=function(){return this},t.AsyncIterator=x,t.async=function(e,n,i,r){var s=new x(h(e,n,i,r));return t.isGeneratorFunction(n)?s:s.next().then(function(t){return t.done?t.value:s.next()})},L(B),B[a]="Generator",B[s]=function(){return this},B.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=I,z.prototype={constructor:z,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return a.type="throw",a.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var h=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(h&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(h){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:I(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}},function(t,e,n){"use strict";n.r(e);var i=n(2),r=n.n(i),s=n(3),o=n.n(s),a=n(0),h=n.n(a),c=n(1),l=n.n(c),u={x:-100,y:-100,lx:-100,ly:-100,frame:0,stall:0,r:2,g:0,b:4,speed:5,height:5,width:127,size:16,color:"#0033CC",eraser:!1,replay:!1,loop:!1,clean:!0,gradient:""},d=function(){function t(e,n){h()(this,t),this.settings=u,this.initialHistory={from:[-1e3,-1e3],to:[-1e3,-1e3],size:this.settings.size,color:this.settings.color},this.history=[this.initialHistory],this.draw=this.draw.bind(this),this.canvas=e,this.context=n}return l()(t,[{key:"colorPhase",value:function(t){var e=this.settings.width,n=2*Math.PI,i=this.settings.height,r=Math.sin(n/i+this.settings.r+t)*e+128,s=Math.sin(n/i+this.settings.g+t)*e+128,o=Math.sin(n/i+this.settings.b+t)*e+128;return"rgb(".concat(Math.round(r),",").concat(Math.round(s),",").concat(Math.round(o),")")}},{key:"line",value:function(t,e,n,i){var r=this.context;r.beginPath(),r.moveTo(this.settings.lx,this.settings.ly),r.lineTo(t,e),r.lineWidth=n,r.lineCap="round",r.lineJoin="round",r.strokeStyle=i,r.stroke(),r.closePath(),this.settings.lx=t,this.settings.ly=e}},{key:"record",value:function(t){this.history.push(t)}},{key:"draw",value:function(){var t=this.settings,e=t.lx,n=t.ly,i=t.x,r=t.y,s=t.size,o=t.eraser,a=t.frame,h=t.replay,c=this.settings.color;0===a&&(c=null),o&&(c="rgb(0,0,0)"),this.line(i,r,s,c);var l={from:[e,n],to:[i,r],size:s,color:c};0!==a&&(h||this.record(l))}},{key:"replay",value:function(){var t=this.history.length-1,e=this.history[this.settings.frame],n=e.from[0],i=e.from[1],r=e.to[0],s=e.to[1],o=e.size,a=e.color;this.settings.frame<t?(this.settings.frame+=1,this.line(n,i,r,s,o,a)):this.settings.loop?(this.settings.stall+=1,this.settings.stall>=60&&(this.settings.stall=0,this.settings.frame=0,this.clear())):(this.settings.frame=0,this.settings.replay=!1)}},{key:"clear",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"reset",value:function(){this.settings.x=-100,this.settings.y=-100,this.settings.lx=-100,this.settings.ly=-100,this.settings.prevX=-100,this.settings.prevY=-100,this.settings.frame=0,this.settings.stall=0,this.settings.speed=5,this.settings.height=5,this.settings.width=127,this.settings.size=16,this.settings.eraser=!1,this.settings.replay=!1,this.settings.loop=!1,this.settings.clean=!0}}]),t}(),f=window.innerWidth,v=window.innerHeight,g=function(){function t(e){var n=this;h()(this,t),this.gifOff=!1,this.eraserBtn=document.getElementById("eraser"),this.clearBtn=document.getElementById("clear"),this.replayBtn=document.getElementById("replay"),this.loopBtn=document.getElementById("loop"),this.blissBtn=document.getElementById("bliss"),this.videoBtn=document.getElementById("videoBtn"),this.videoScrn=document.getElementById("video"),this.sizer=document.getElementById("sizer"),this.color=document.getElementById("color"),this.snapChat=document.getElementById("basicallySnapchat"),this.snapChatBtn=document.getElementById("snapBtn"),this.snapBlock=document.getElementById("snapBlock"),this.snapOffBtn=document.getElementById("snapOff"),this.gifBro=document.getElementById("gifBro"),this.gifCanvas=document.getElementById("gifCanvas"),this.eraserBtn.addEventListener("click",function(){return n.eraser()}),this.clearBtn.addEventListener("click",function(){return n.clear()}),this.replayBtn.addEventListener("click",function(){return n.replay()}),this.loopBtn.addEventListener("click",function(){return n.loop()}),this.blissBtn.addEventListener("click",function(){return n.bliss()}),this.videoBtn.addEventListener("click",function(){return n.video()}),this.snapChatBtn.addEventListener("click",function(){return n.snap()}),this.snapOffBtn.addEventListener("click",function(){return n.snapOff()}),this.gifBro.addEventListener("click",function(){return n.gifToggle()}),this.sizer.addEventListener("change",function(t){return n.sizeSlider(t)}),this.color.addEventListener("change",function(t){return n.updateBrush(t)}),this.eraser=this.eraser.bind(this),this.clear=this.clear.bind(this),this.replay=this.replay.bind(this),this.loop=this.loop.bind(this),this.brush=e,this.settings=this.brush.settings,this.videoScrn.width=this.snapChat.width=this.gifCanvas.width=f,this.videoScrn.height=this.snapChat.height=this.gifCanvas.height=v,this.sizeCounter=this.settings.size,this.gogogo=null,this.gifArray=[],this.blissBtn.style.visibility="hidden",this.sizer.style.visibility="hidden",this.videoBtn.style.visibility="hidden",this.gifBro.style.visibility="hidden",this.snapBlock.visibility="hidden",this.loopBtn.visibility="hidden",this.eraserBtn.visibility="hidden",this.replayBtn.visibility="hidden",this.video()}return l()(t,[{key:"updateBrush",value:function(t){this.brush.settings.color=t.target.value}},{key:"video",value:function(){var t=this;if(this.videoBtn.classList.contains("active"))return this.videoBtn.classList.remove("active"),this.snapBlock.style="display: none",this.videoScrn.style="display: none",this.snapChat.style="display: none",!1;navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){t.videoScrn.srcObject=e,t.videoScrn.setAttribute("autoplay",!0),t.videoScrn.style="display: block",t.snapBlock.style="display: block"}).catch(function(t){window.alert(t)}),this.videoBtn.classList.add("active")}},{key:"snap",value:function(){var t=this,e=this,n=e.videoScrn,i=e.snapChat;var r,s,o,a,h={width:n.videoWidth,height:n.videoHeight},c={width:i.width,height:i.height},l=(s=c,o=(r=h).width/r.height,s.width/s.height>o?{width:s.height*o,height:s.height}:{width:s.width,height:s.width/o}),u=(c.width-l.width)/2,d=(c.height-l.height)/2,f=this.gifArray.length,v=50;function g(){f>=e.gifArray.length-1?f=0:f+=1,e.gifCanvas.getContext("2d").putImageData(e.gifArray[f],u,d)}function y(){var t=(v-=1)%50;e.snapChatBtn.innerHTML=t,function(){i.getContext("2d").drawImage(n,u,d,l.width,l.height);var t=i.getContext("2d").getImageData(u,d,l.width,l.height);e.gifArray.push(t)}(),0===v&&(e.snapChatBtn.innerHTML="Snap!",e.snapChatBtn.classList.add("active"),e.snapChatBtn.classList.remove("woooooooo"),i.style="display: block",i.getContext("2d").drawImage(n,u,d,l.width,l.height),clearInterval(a),e.gogogo=setInterval(g,60),e.gifBro.disabled=!1,e.snapOffBtn.disabled=!1,e.gifBro.classList.add("baked"),this.gifCanvas.style="display: block")}this.videoBtn.classList.contains("active")&&(this.snapOff(),t.snapChatBtn.classList.add("ehhhh"),t.snapChatBtn.innerHTML="Ready?",t.snapChatBtn.classList.remove("active"),t.gifBro.disabled=!0,t.snapOffBtn.disabled=!0,t.gifBro.classList.remove("active"),t.gifCanvas.style="display: none",t.gifArray=[],clearInterval(t.gogogo),setTimeout(function(){a=setInterval(y,100),t.snapChatBtn.classList.add("woooooooo"),t.snapChatBtn.classList.remove("ehhhh")},1500))}},{key:"snapOff",value:function(){this.gifCanvas.style="display: none",this.snapChat.style="display: none",this.snapChatBtn.classList.remove("active"),this.gifBro.classList.remove("active")}},{key:"gifToggle",value:function(){}},{key:"clear",value:function(){var t=this.brush,e=this.loopBtn,n=this.eraserBtn;t.clear(),t.history=[t.initialHistory],t.reset(),e.classList.remove("active"),n.classList.remove("active")}},{key:"eraser",value:function(){var t=this.settings,e=this.eraserBtn;t.eraser=!t.eraser,t.x=-100,t.y=-100,t.lx=-100,t.ly=-100,e.classList.toggle("active")}},{key:"replay",value:function(){var t=this.brush,e=this.settings,n=this.eraserBtn;e.frame=0,e.x=-100,e.y=-100,e.lx=-100,e.ly=-100,e.replay||(t.clear(),e.eraser=!1,e.replay=!0,n.classList.remove("active"))}},{key:"loop",value:function(){var t=this.brush,e=this.settings,n=this.replayBtn,i=this.loopBtn,r=this.eraserBtn,s=this.clearBtn;e.frame=0,e.clean=!0,e.x=-100,e.y=-100,e.lx=-100,e.ly=-100,t.clear(),e.loop?(e.loop=!1,e.replay=!1,t.history=[t.initialHistory],t.reset(),n.disabled=!1,r.disabled=!1,s.disabled=!1):(e.loop=!0,e.replay=!0,n.disabled=!0,r.disabled=!0,s.disabled=!0),i.classList.toggle("active"),r.classList.remove("active")}},{key:"bliss",value:function(){document.body.classList.toggle("bliss"),this.blissBtn.classList.toggle("active")}},{key:"sizeUp",value:function(){this.brush.reset(),this.settings.size+=2,this.sizeCounter=this.settings.size,document.getElementById("size").innerHTML=this.settings.size}},{key:"sizeDown",value:function(){this.brush.reset(),this.settings.size-=2,this.sizeCounter=this.settings.size,document.getElementById("size").innerHTML=this.settings.size}},{key:"sizeSlider",value:function(t){this.brush.reset(),this.settings.size=t.target.value,document.getElementById("size").innerHTML=this.settings.size}}]),t}(),y=function(){function t(){h()(this,t)}return l()(t,null,[{key:"load",value:function(t){return new Promise(function(e,n){var i=new Image;i.onload=function(){return e(i)},i.onerror=n,i.src=t})}}]),t}();new(function(){function t(e){h()(this,t),this.canvas=document.getElementById(e),this.context=this.canvas.getContext("2d"),this.brush=new d(this.canvas,this.context),this.controls=new g(this.brush),this.resizeCanvas=this.resizeCanvas.bind(this)}var e;return l()(t,[{key:"resizeCanvas",value:function(){var t=this.canvas,e=this.context,n=window.devicePixelRatio;t.width=window.innerWidth*n,t.height=window.innerHeight*n,t.style.width=window.innerWidth,t.style.height=window.innerHeight,e.drawImage(t,0,0)}},{key:"initializeCanvas",value:(e=o()(r.a.mark(function t(){var e,n,i,s,o,a,h,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=function(){i.replay?n.replay():n.draw(),window.requestAnimationFrame(c)},h=function(t){i.frame=0,o(t),e.addEventListener("touchmove",o)},a=function(t){i.frame=0,o(t),e.addEventListener("mousemove",o)},o=function(t){var e,n;if(i.clean&&(i.clean=!1),"mousemove"!==t.type&&"mousedown"!==t.type||(e=t.clientX,n=t.clientY),"touchmove"===t.type||"touchstart"===t.type){var r=t.targetTouches;e=r[0].clientX,n=r[0].clientY}0===i.frame&&(i.lx=e,i.ly=n),i.x=e,i.y=n,i.frame+=1},e=this.canvas,n=this.brush,i=n.settings,t.next=8,y.load("hbd.gif");case 8:this.sticker=t.sent,(s=new XMLHttpRequest).open("GET","/hbd.gif"),s.responseType="arraybuffer",s.onload=function(){var t=s.response;console.log(t)},s.send(),this.resizeCanvas(),window.addEventListener("resize",this.resizeCanvas,!1),e.addEventListener("mouseup",function(){i.frame=0,e.removeEventListener("mousemove",o)},!1),e.addEventListener("touchend",function(){i.frame=0,e.removeEventListener("touchmove",o)},!1),e.addEventListener("touchstart",h,!1),e.addEventListener("mousedown",a,!1),c();case 21:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})}]),t}())("doodleCanvas").initializeCanvas()}]);